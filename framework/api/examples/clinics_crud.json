{
  "name": "Clinics CRUD Operations",
  "description": "Exemplos de operações CRUD para clínicas",
  "examples": [
    {
      "name": "Criar Clínica",
      "request": {
        "method": "POST",
        "url": "/clinics",
        "headers": {
          "Content-Type": "application/json",
          "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
        },
        "body": {
          "name": "Clínica São Paulo",
          "whatsapp_number": "+5511988776655",
          "meta_webhook_url": "https://webhook.clinicasp.com.br/whatsapp",
          "whatsapp_id": "clinica_sp_whatsapp_id",
          "context_json": {
            "agente_ia": {
              "configuracao": {
                "nome": "Dr. Virtual SP",
                "personalidade": "Profissional e acolhedor",
                "tom_comunicacao": "Formal mas amigável",
                "saudacao_inicial": "Olá! Sou o assistente virtual da Clínica São Paulo. Como posso ajudá-lo?",
                "mensagem_despedida": "Obrigado pelo contato! Tenha um ótimo dia!",
                "mensagem_fora_horario": "No momento estamos fora do horário de atendimento. Funcionamos de segunda a sexta das 8h às 18h."
              },
              "comportamento": {
                "proativo": true,
                "oferece_sugestoes": true,
                "escalacao_automatica": true,
                "limite_tentativas": 3
              }
            },
            "horario_funcionamento": {
              "segunda": {"abertura": "08:00", "fechamento": "18:00"},
              "terca": {"abertura": "08:00", "fechamento": "18:00"},
              "quarta": {"abertura": "08:00", "fechamento": "18:00"},
              "quinta": {"abertura": "08:00", "fechamento": "18:00"},
              "sexta": {"abertura": "08:00", "fechamento": "18:00"},
              "sabado": {"abertura": "08:00", "fechamento": "12:00"},
              "domingo": {"abertura": "00:00", "fechamento": "00:00"}
            },
            "agendamento_config": {
              "tipos_agendamento": [
                {
                  "id": "consulta_geral",
                  "nome": "Consulta Geral",
                  "descricao": "Consulta médica geral",
                  "duracao_minutos": 30,
                  "prioridade": 1,
                  "cor_google_calendar": "#4285f4"
                },
                {
                  "id": "emergencia",
                  "nome": "Emergência",
                  "descricao": "Atendimento de emergência",
                  "duracao_minutos": 60,
                  "prioridade": 10,
                  "cor_google_calendar": "#ea4335"
                }
              ]
            }
          },
          "simulation_mode": false
        }
      },
      "response": {
        "status": 201,
        "body": {
          "id": "550e8400-e29b-41d4-a716-446655440100",
          "name": "Clínica São Paulo",
          "whatsapp_number": "+5511988776655",
          "meta_webhook_url": "https://webhook.clinicasp.com.br/whatsapp",
          "whatsapp_id": "clinica_sp_whatsapp_id",
          "context_json": "{ ... }", 
          "simulation_mode": false,
          "status": "active",
          "created_at": "2025-01-20T15:30:00Z",
          "updated_at": "2025-01-20T15:30:00Z"
        }
      }
    },
    {
      "name": "Listar Clínicas (Admin Lify)",
      "request": {
        "method": "GET",
        "url": "/clinics?page=1&limit=10&status=active",
        "headers": {
          "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
        }
      },
      "response": {
        "status": 200,
        "body": {
          "data": [
            {
              "id": "550e8400-e29b-41d4-a716-446655440000",
              "name": "Clínica Demo",
              "whatsapp_number": "+5511999999999",
              "status": "active",
              "created_at": "2025-01-20T10:00:00Z"
            },
            {
              "id": "550e8400-e29b-41d4-a716-446655440100",
              "name": "Clínica São Paulo",
              "whatsapp_number": "+5511988776655",
              "status": "active",
              "created_at": "2025-01-20T15:30:00Z"
            }
          ],
          "pagination": {
            "page": 1,
            "limit": 10,
            "total": 2,
            "pages": 1,
            "has_next": false,
            "has_prev": false
          }
        }
      }
    },
    {
      "name": "Obter Clínica por ID",
      "request": {
        "method": "GET",
        "url": "/clinics/550e8400-e29b-41d4-a716-446655440000",
        "headers": {
          "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
        }
      },
      "response": {
        "status": 200,
        "body": {
          "id": "550e8400-e29b-41d4-a716-446655440000",
          "name": "Clínica Demo",
          "whatsapp_number": "+5511999999999",
          "meta_webhook_url": "https://webhook.example.com/whatsapp",
          "whatsapp_id": "demo_whatsapp_id",
          "context_json": {
            "agente_ia": {
              "configuracao": {
                "nome": "Dr. Virtual",
                "personalidade": "Profissional e acolhedor",
                "tom_comunicacao": "Formal mas amigável"
              }
            },
            "horario_funcionamento": {
              "segunda": {"abertura": "08:00", "fechamento": "18:00"}
            }
          },
          "simulation_mode": false,
          "status": "active",
          "created_at": "2025-01-20T10:00:00Z",
          "updated_at": "2025-01-20T10:00:00Z"
        }
      }
    },
    {
      "name": "Atualizar Clínica",
      "request": {
        "method": "PUT",
        "url": "/clinics/550e8400-e29b-41d4-a716-446655440000",
        "headers": {
          "Content-Type": "application/json",
          "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
        },
        "body": {
          "name": "Clínica Demo Atualizada",
          "simulation_mode": true,
          "context_json": {
            "agente_ia": {
              "configuracao": {
                "nome": "Dr. Virtual Pro",
                "personalidade": "Muito profissional e técnico",
                "saudacao_inicial": "Bem-vindo à Clínica Demo Atualizada! Como posso ajudá-lo hoje?"
              }
            }
          }
        }
      },
      "response": {
        "status": 200,
        "body": {
          "id": "550e8400-e29b-41d4-a716-446655440000",
          "name": "Clínica Demo Atualizada",
          "whatsapp_number": "+5511999999999",
          "simulation_mode": true,
          "status": "active",
          "updated_at": "2025-01-20T16:00:00Z"
        }
      }
    },
    {
      "name": "Erro - Acesso Negado (Não Admin Lify)",
      "request": {
        "method": "POST",
        "url": "/clinics",
        "headers": {
          "Content-Type": "application/json",
          "Authorization": "Bearer token_atendente"
        },
        "body": {
          "name": "Nova Clínica",
          "whatsapp_number": "+5511888888888"
        }
      },
      "response": {
        "status": 403,
        "body": {
          "type": "https://api.atendeai.com.br/errors/permission-denied",
          "title": "Permissão Negada",
          "status": 403,
          "detail": "Usuário não possui permissão para esta operação",
          "instance": "/clinics",
          "required_role": "admin_lify"
        }
      }
    },
    {
      "name": "Erro - WhatsApp Duplicado",
      "request": {
        "method": "POST",
        "url": "/clinics",
        "headers": {
          "Content-Type": "application/json",
          "Authorization": "Bearer admin_token"
        },
        "body": {
          "name": "Clínica Teste",
          "whatsapp_number": "+5511999999999",
          "context_json": {}
        }
      },
      "response": {
        "status": 422,
        "body": {
          "type": "https://api.atendeai.com.br/errors/unique-constraint-violation",
          "title": "Violação de Restrição de Unicidade",
          "status": 422,
          "detail": "O valor fornecido já existe no sistema",
          "instance": "/clinics",
          "field": "whatsapp_number",
          "value": "+5511999999999"
        }
      }
    }
  ]
}
