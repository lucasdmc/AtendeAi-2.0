# =====================================================
# CONFIGURAÇÃO PROMETHEUS - ENTREGÁVEL 1
# ATENDEAI 2.0
# =====================================================

global:
  scrape_interval: 15s
  evaluation_interval: 15s

rule_files:
  # - "first_rules.yml"
  # - "second_rules.yml"

scrape_configs:
  # =====================================================
  # PROMETHEUS SELF-MONITORING
  # =====================================================
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']

  # =====================================================
  # AUTH SERVICE
  # =====================================================
    metrics_path: '/metrics'
    scrape_interval: 10s
    scrape_timeout: 5s

  # =====================================================
  # USER SERVICE
  # =====================================================
  - job_name: 'user-service'
    static_configs:
      - targets: ['user-service:3002']
    metrics_path: '/metrics'
    scrape_interval: 10s
    scrape_timeout: 5s

  # =====================================================
  # CLINIC SERVICE
  # =====================================================
  - job_name: 'clinic-service'
    static_configs:
      - targets: ['clinic-service:3003']
    metrics_path: '/metrics'
    scrape_interval: 10s
    scrape_timeout: 5s

  # =====================================================
  # HEALTH SERVICE
  # =====================================================
  - job_name: 'health-service'
    static_configs:
      - targets: ['health-service:3004']
    metrics_path: '/metrics'
    scrape_interval: 10s
    scrape_timeout: 5s

  # =====================================================
  # CONVERSATION SERVICE
  # =====================================================
  - job_name: 'conversation-service'
    static_configs:
      - targets: ['conversation-service:3005']
    metrics_path: '/metrics'
    scrape_interval: 10s
    scrape_timeout: 5s

  # =====================================================
  # APPOINTMENT SERVICE
  # =====================================================
  - job_name: 'appointment-service'
    static_configs:
      - targets: ['appointment-service:3006']
    metrics_path: '/metrics'
    scrape_interval: 10s
    scrape_timeout: 5s

  # =====================================================
  # WHATSAPP SERVICE
  # =====================================================
  - job_name: 'whatsapp-service'
    static_configs:
      - targets: ['whatsapp-service:3007']
    metrics_path: '/metrics'
    scrape_interval: 10s
    scrape_timeout: 5s

  # =====================================================
  # GOOGLE CALENDAR SERVICE
  # =====================================================
  - job_name: 'google-calendar-service'
    static_configs:
      - targets: ['google-calendar-service:3008']
    metrics_path: '/metrics'
    scrape_interval: 10s
    scrape_timeout: 5s

  # =====================================================
  # POSTGRESQL DATABASE
  # =====================================================
  - job_name: 'postgres'
    static_configs:
      - targets: ['postgres:5432']
    metrics_path: '/metrics'
    scrape_interval: 30s
    scrape_timeout: 10s

  # =====================================================
  # REDIS CACHE
  # =====================================================
  - job_name: 'redis'
    static_configs:
      - targets: ['redis:6379']
    metrics_path: '/metrics'
    scrape_interval: 30s
    scrape_timeout: 10s

  # =====================================================
  # KONG API GATEWAY
  # =====================================================
  - job_name: 'kong'
    static_configs:
      - targets: ['kong:8001']
    metrics_path: '/metrics'
    scrape_interval: 15s
    scrape_timeout: 5s

  # =====================================================
  # HAPROXY LOAD BALANCER
  # =====================================================
  - job_name: 'haproxy'
    static_configs:
      - targets: ['haproxy:80']
    metrics_path: '/metrics'
    scrape_interval: 15s
    scrape_timeout: 5s
